# 🎮 Public Goods Dilemma

## 一、游戏简介与设计思想

**Public Goods Dilemma** 是一个以“公共品困境”为核心设计的互动模拟游戏，使用 Python 与 Pygame 实现。玩家将在有限回合内与多名 AI 共同为公共项目筹资，在博弈与合作中体验现实社会中“搭便车”现象与公共资源供给的困境。

本游戏模拟群体中个体如何在面对公共利益与个人收益之间作出选择，通过引入惩罚机制、AI 策略差异与随机目标金额来增加博弈复杂度，体现行为经济学中有关合作、惩罚和社会规范演化的核心概念。

---

## 二、经济学原理应用

该游戏基于以下经济与行为学原理：

- **公共品困境**：个体受益于公共物品却可选择不贡献，导致项目难以完成。
- **搭便车问题（Free Rider Problem）**：部分个体选择零捐赠，希望他人承担成本。
- **惩罚机制**：项目失败时对低贡献者进行经济惩罚，用以提高合作意愿。
- **行为异质性**：不同 AI 模拟不同个体性格，如从众者、利他者、搭便车者、机会主义者。

---

## 三、核心玩法与机制说明

- 游戏共有 **5 轮**，玩家每轮固定获得 **$100** 收入。
- 玩家需在每轮输入一个捐赠金额（0~100）以资助公共项目。
- AI 玩家（4 个）拥有不同的行为策略，并会根据历史情况调整行为。
- 每轮所有人的捐款总和将显示，并判断是否逐步接近目标。
- **达标时**：所有人获得共享收益（随超额程度调整）。
- **失败时**：除“最高捐赠者”外，其他人将受到 **$200** 惩罚。

---

## 四、如何运行与操作

### ✅ 环境依赖

- Python 3.x
- 安装依赖库：

bash
pip install pygame


### ▶️ 启动游戏

bash
python public_goods_game.py


### 🎮 操作方法

- 启动后点击“Start Game”开始游戏。
- 每轮在输入框中输入捐赠金额（0~100），按回车确认。
- 点击“Continue”查看回合总结并进入下一轮。
- 游戏结束后可查看每位玩家总捐赠与最终收益，并可点击“Play Again”重启游戏。

---

## 五、代码结构与实现说明

本项目为单文件结构，逻辑清晰，适合教学与拓展。主要模块如下：

### 📁 核心结构概览

- **主流程入口**：
  - \`main()\`：游戏主循环，处理所有界面渲染与事件响应。
- **游戏阶段划分**：
  - \`draw_instructions()\`：游戏介绍界面。
  - \`draw_gameplay()\`：玩家输入捐款的主界面。
  - \`draw_round_summary()\`：每轮结束后的汇总界面。
  - \`draw_results()\`：游戏结果显示与分析。
- **逻辑函数**：
  - \`process_round()\`：处理每轮玩家与 AI 捐赠并计算贡献。
  - \`ai_contribute(index)\`：根据 AI 类型生成对应的捐赠决策。
  - \`marginal_public_benefit(total)\`：计算公共收益函数。
- **界面元素**：
  - 使用 \`pygame.Rect\` 管理按钮与输入框。
  - 文本渲染通过 \`draw_text_center()\` 简化布局。

### 🤖 AI 行为建模

AI 类型在 \`ai_profiles\` 中定义：

| 类型         | 行为特征                                          |
|--------------|---------------------------------------------------|
| follower     | 模仿上轮平均行为                                   |
| social       | 偏好较高捐赠，略高于平均                           |
| free_rider   | 倾向于捐赠极少                                     |
| opportunist  | 观察近几轮形势，伺机而动，捐赠不确定               |

AI 合作倾向会在群体未达标时逐步下降，模拟现实中信任瓦解过程。

### 📦 使用的外部库

- \`pygame\`: 图形界面与事件控制
- \`random\`: 控制 AI 捐赠策略的波动与不确定性
- \`sys\`: 游戏退出控制

---

## 六、适用场景与意义

该游戏可广泛用于以下领域：

- 🎓 **教学辅助**：用于经济学、社会学、博弈论等课程讲解公共品理论。
- 🧪 **行为实验**：可以用于研究个体决策与合作动力。

---


## 🎯 游戏意义

- **理解公共品困境**：通过模拟体验搭便车问题和合作难题，感受个人利益与群体利益的冲突。
- **探索合作机制**：观察惩罚与激励如何影响群体成员的合作意愿。
- **行为经济学启示**：认识不同类型个体在群体互动中的策略和反应。
- **社会信任建构**：体验信任如何随着群体表现变化而增强或破裂。
